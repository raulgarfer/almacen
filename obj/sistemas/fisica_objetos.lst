                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.8 #9946 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module fisica_objetos
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _espera_pulsar
                             12 	.globl _fin_juego
                             13 	.globl _borra_objeto
                             14 	.globl _suma_puntos
                             15 	.globl _cpct_getScreenPtr
                             16 	.globl _cpct_drawStringM2
                             17 	.globl _cpct_isAnyKeyPressed
                             18 	.globl _cpct_scanKeyboard
                             19 	.globl _fisica_objetos
                             20 	.globl _comprobar_recojida
                             21 	.globl _muere
                             22 	.globl _espera_pulsacion_tecla
                             23 ;--------------------------------------------------------
                             24 ; special function registers
                             25 ;--------------------------------------------------------
                             26 ;--------------------------------------------------------
                             27 ; ram data
                             28 ;--------------------------------------------------------
                             29 	.area _DATA
                             30 ;--------------------------------------------------------
                             31 ; ram data
                             32 ;--------------------------------------------------------
                             33 	.area _INITIALIZED
                             34 ;--------------------------------------------------------
                             35 ; absolute external ram data
                             36 ;--------------------------------------------------------
                             37 	.area _DABS (ABS)
                             38 ;--------------------------------------------------------
                             39 ; global & static initialisations
                             40 ;--------------------------------------------------------
                             41 	.area _HOME
                             42 	.area _GSINIT
                             43 	.area _GSFINAL
                             44 	.area _GSINIT
                             45 ;--------------------------------------------------------
                             46 ; Home
                             47 ;--------------------------------------------------------
                             48 	.area _HOME
                             49 	.area _HOME
                             50 ;--------------------------------------------------------
                             51 ; code
                             52 ;--------------------------------------------------------
                             53 	.area _CODE
                             54 ;src/sistemas/fisica_objetos.c:4: void fisica_objetos(){
                             55 ;	---------------------------------
                             56 ; Function fisica_objetos
                             57 ; ---------------------------------
   0000                      58 _fisica_objetos::
                             59 ;src/sistemas/fisica_objetos.c:5: borra_objeto(array[1].x,array[1].y,array[1].ancho,array[1].alto);
   0000 21r0Fr00      [10]   60 	ld	hl, #_array + 15
   0003 4E            [ 7]   61 	ld	c, (hl)
   0004 21r0Er00      [10]   62 	ld	hl, #_array + 14
   0007 46            [ 7]   63 	ld	b, (hl)
   0008 21r0Br00      [10]   64 	ld	hl, #_array + 11
   000B 5E            [ 7]   65 	ld	e, (hl)
   000C 21r0Ar00      [10]   66 	ld	hl, #(_array + 0x000a) + 0
   000F 56            [ 7]   67 	ld	d, (hl)
   0010 79            [ 4]   68 	ld	a, c
   0011 F5            [11]   69 	push	af
   0012 33            [ 6]   70 	inc	sp
   0013 C5            [11]   71 	push	bc
   0014 33            [ 6]   72 	inc	sp
   0015 7B            [ 4]   73 	ld	a, e
   0016 F5            [11]   74 	push	af
   0017 33            [ 6]   75 	inc	sp
   0018 D5            [11]   76 	push	de
   0019 33            [ 6]   77 	inc	sp
   001A CDr00r00      [17]   78 	call	_borra_objeto
   001D F1            [10]   79 	pop	af
   001E F1            [10]   80 	pop	af
                             81 ;src/sistemas/fisica_objetos.c:6: array[1].x+=array[1].vx;
   001F 21r0Ar00      [10]   82 	ld	hl, #(_array + 0x000a) + 0
   0022 4E            [ 7]   83 	ld	c, (hl)
   0023 21r0Cr00      [10]   84 	ld	hl, #_array + 12
   0026 5E            [ 7]   85 	ld	e, (hl)
   0027 79            [ 4]   86 	ld	a, c
   0028 83            [ 4]   87 	add	a, e
   0029 32r0Ar00      [13]   88 	ld	(#(_array + 0x000a)),a
                             89 ;src/sistemas/fisica_objetos.c:7: if (array[1].x==caida_objeto)
   002C 21r0Ar00      [10]   90 	ld	hl, #(_array + 0x000a) + 0
   002F 4E            [ 7]   91 	ld	c, (hl)
   0030 3Ar00r00      [13]   92 	ld	a,(#_caida_objeto + 0)
   0033 91            [ 4]   93 	sub	a, c
   0034 C0            [11]   94 	ret	NZ
                             95 ;src/sistemas/fisica_objetos.c:8: {comprobar_recojida();}
   0035 C3r38r00      [10]   96 	jp  _comprobar_recojida
                             97 ;src/sistemas/fisica_objetos.c:11: void comprobar_recojida(){
                             98 ;	---------------------------------
                             99 ; Function comprobar_recojida
                            100 ; ---------------------------------
   0038                     101 _comprobar_recojida::
                            102 ;src/sistemas/fisica_objetos.c:12: if (array[1].y==array[0].y)
   0038 21r0Br00      [10]  103 	ld	hl, #_array + 11
   003B 4E            [ 7]  104 	ld	c, (hl)
   003C 21r02r00      [10]  105 	ld	hl, #_array + 2
   003F 46            [ 7]  106 	ld	b, (hl)
   0040 79            [ 4]  107 	ld	a, c
   0041 90            [ 4]  108 	sub	a, b
                            109 ;src/sistemas/fisica_objetos.c:13: {suma_puntos();}
   0042 CAr00r00      [10]  110 	jp	Z,_suma_puntos
                            111 ;src/sistemas/fisica_objetos.c:14: else {muere();}}
   0045 C3r48r00      [10]  112 	jp  _muere
                            113 ;src/sistemas/fisica_objetos.c:16: void muere(){
                            114 ;	---------------------------------
                            115 ; Function muere
                            116 ; ---------------------------------
   0048                     117 _muere::
                            118 ;src/sistemas/fisica_objetos.c:17: vidas--;
   0048 21r00r00      [10]  119 	ld	hl, #_vidas+0
   004B 35            [11]  120 	dec	(hl)
                            121 ;src/sistemas/fisica_objetos.c:18: array[1].x = x_start_objeto;
   004C 21r0Ar00      [10]  122 	ld	hl, #(_array + 0x000a)
   004F 36 3C         [10]  123 	ld	(hl), #0x3c
                            124 ;src/sistemas/fisica_objetos.c:19: pinta_marcador();
   0051 CDr00r00      [17]  125 	call	_pinta_marcador
                            126 ;src/sistemas/fisica_objetos.c:20: if (vidas=='0')
   0054 3Ar00r00      [13]  127 	ld	a,(#_vidas + 0)
   0057 D6 30         [ 7]  128 	sub	a, #0x30
   0059 C0            [11]  129 	ret	NZ
                            130 ;src/sistemas/fisica_objetos.c:21: {fin_juego();}
   005A C3r5Dr00      [10]  131 	jp  _fin_juego
                            132 ;src/sistemas/fisica_objetos.c:23: void fin_juego(){
                            133 ;	---------------------------------
                            134 ; Function fin_juego
                            135 ; ---------------------------------
   005D                     136 _fin_juego::
                            137 ;src/sistemas/fisica_objetos.c:26: pvmem=cpct_getScreenPtr(0xc000,10,20);
   005D 21 0A 14      [10]  138 	ld	hl, #0x140a
   0060 E5            [11]  139 	push	hl
   0061 21 00 C0      [10]  140 	ld	hl, #0xc000
   0064 E5            [11]  141 	push	hl
   0065 CDr00r00      [17]  142 	call	_cpct_getScreenPtr
                            143 ;src/sistemas/fisica_objetos.c:27: cpct_drawStringM2("Has sido despedido!",pvmem);
   0068 01r8Ar00      [10]  144 	ld	bc, #___str_0+0
   006B E5            [11]  145 	push	hl
   006C C5            [11]  146 	push	bc
   006D CDr00r00      [17]  147 	call	_cpct_drawStringM2
                            148 ;src/sistemas/fisica_objetos.c:28: pvmem=cpct_getScreenPtr(0xc000,10,40);
   0070 21 0A 28      [10]  149 	ld	hl, #0x280a
   0073 E5            [11]  150 	push	hl
   0074 21 00 C0      [10]  151 	ld	hl, #0xc000
   0077 E5            [11]  152 	push	hl
   0078 CDr00r00      [17]  153 	call	_cpct_getScreenPtr
                            154 ;src/sistemas/fisica_objetos.c:29: cpct_drawStringM2("Vuelve a intentarlo.",pvmem);
   007B 01r9Er00      [10]  155 	ld	bc, #___str_1+0
   007E E5            [11]  156 	push	hl
   007F C5            [11]  157 	push	bc
   0080 CDr00r00      [17]  158 	call	_cpct_drawStringM2
                            159 ;src/sistemas/fisica_objetos.c:30: espera_pulsacion_tecla();
   0083 CDrB3r00      [17]  160 	call	_espera_pulsacion_tecla
                            161 ;src/sistemas/fisica_objetos.c:31: espera_pulsar();
   0086 CDrC0r00      [17]  162 	call	_espera_pulsar
   0089 C9            [10]  163 	ret
   008A                     164 ___str_0:
   008A 48 61 73 20 73 69   165 	.ascii "Has sido despedido!"
        64 6F 20 64 65 73
        70 65 64 69 64 6F
        21
   009D 00                  166 	.db 0x00
   009E                     167 ___str_1:
   009E 56 75 65 6C 76 65   168 	.ascii "Vuelve a intentarlo."
        20 61 20 69 6E 74
        65 6E 74 61 72 6C
        6F 2E
   00B2 00                  169 	.db 0x00
                            170 ;src/sistemas/fisica_objetos.c:33: void espera_pulsacion_tecla(){
                            171 ;	---------------------------------
                            172 ; Function espera_pulsacion_tecla
                            173 ; ---------------------------------
   00B3                     174 _espera_pulsacion_tecla::
                            175 ;src/sistemas/fisica_objetos.c:35: cpct_scanKeyboard();
   00B3 CDr00r00      [17]  176 	call	_cpct_scanKeyboard
                            177 ;src/sistemas/fisica_objetos.c:36: pulsado=cpct_isAnyKeyPressed();
   00B6 CDr00r00      [17]  178 	call	_cpct_isAnyKeyPressed
                            179 ;src/sistemas/fisica_objetos.c:37: if (pulsado!=0)
   00B9 7D            [ 4]  180 	ld	a, l
   00BA B7            [ 4]  181 	or	a, a
                            182 ;src/sistemas/fisica_objetos.c:38: {espera_pulsar();}
   00BB C2rC0r00      [10]  183 	jp	NZ,_espera_pulsar
                            184 ;src/sistemas/fisica_objetos.c:39: else espera_pulsacion_tecla();
   00BE 18 F3         [12]  185 	jr	_espera_pulsacion_tecla
                            186 ;src/sistemas/fisica_objetos.c:41: void espera_pulsar(){
                            187 ;	---------------------------------
                            188 ; Function espera_pulsar
                            189 ; ---------------------------------
   00C0                     190 _espera_pulsar::
                            191 ;src/sistemas/fisica_objetos.c:42: a_jugar();}
   00C0 C3r00r00      [10]  192 	jp  _a_jugar
                            193 	.area _CODE
                            194 	.area _INITIALIZER
                            195 	.area _CABS (ABS)
